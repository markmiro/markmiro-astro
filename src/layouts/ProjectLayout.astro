---
import PostLayout from "./PostLayout.astro";
import ProjectHeader from "@components/ProjectHeader.astro";
import _ from "lodash";
const { frontmatter, title } = Astro.props;
const title2 = title || frontmatter.title || "Untitled";

function getSlug() {
  const tokens = (new URL(Astro.url)).pathname.split('/');
  const nonEmpty = _.filter(tokens, (section) => section !== '');
  return _.last(nonEmpty);
}

const slug = getSlug();
---

<PostLayout title={title2}>
  <ProjectHeader slug={slug} />
  <slot />
</PostLayout>
